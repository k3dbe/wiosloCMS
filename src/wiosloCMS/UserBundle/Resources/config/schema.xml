<?xml version="1.0" encoding="utf-8"?>
<!--Autogenerated by PropelSchemaReverseTask class.-->
<database name="main" namespace="wiosloCMS\UserBundle\Model" defaultIdMethod="native">

	<table name="User" phpName="User" idMethod="native">
		<column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
		<column name="uri" phpName="Uri" type="VARCHAR" size="250" required="true"/>
		<column name="username" phpName="Username" type="VARCHAR" size="50" required="true"/>
		<column name="name" phpName="Name" type="VARCHAR" size="50" required="true"/>
		<column name="surname" phpName="Surname" type="VARCHAR" size="100" required="false"/>
		<column name="email" phpName="Email" type="VARCHAR" size="150" required="true"/>
		<column name="city" phpName="City" type="VARCHAR" size="500" required="false"/>
		<column name="birthday" phpName="Birthday" type="DATE" required="false"/>
		<column name="gender" phpName="Gender" type="TINYINT" required="false"/>
		<column name="password" phpName="Password" type="VARCHAR" size="130" required="false"/>
		<column name="registered_at" phpName="RegisteredAt" type="TIMESTAMP" required="true"/>
		<column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" required="true"/>
		<unique name="username">
			<unique-column name="username"/>
		</unique>
		<unique name="uri">
			<unique-column name="uri"/>
		</unique>

		<behavior name="sluggable">
			<parameter name="slug_column" value="uri"/>
			<parameter name="slug_pattern" value="{username}"/>
			<parameter name="replace_pattern" value="/[^\w\/]+/u"/>
			<parameter name="replacement" value="-"/>
			<parameter name="separator" value="_"/>
			<parameter name="permanent" value="true"/>
			<parameter name="scope_column" value=""/>
		</behavior>

		<behavior name="timestampable">
			<parameter name="create_column" value="registered_at"/>
			<parameter name="update_column" value="updated_at"/>
		</behavior>

		<vendor type="mysql">
			<parameter name="Engine" value="InnoDB"/>
		</vendor>
	</table>

	<table name="UserSettings" phpName="UserSettings" idMethod="native">
		<column name="user_id" phpName="UserId" type="INTEGER" primaryKey="true" required="true"/>
		<column name="settings" phpName="Settings" type="LONGVARCHAR" required="true"/>
		<column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" required="true"/>

		<foreign-key foreignTable="User" name="UserSettings_ibfk_1" onDelete="CASCADE" onUpdate="CASCADE">
			<reference local="user_id" foreign="id"/>
		</foreign-key>

		<vendor type="mysql">
			<parameter name="Engine" value="InnoDB"/>
		</vendor>
	</table>

	<table name="UserRole" phpName="UserRole" idMethod="native" isCrossRef="true">
		<column name="user_id" phpName="UserId" type="INTEGER" primaryKey="true" required="true"/>
		<column name="role_id" phpName="RoleId" type="INTEGER" primaryKey="true" required="true"/>

		<foreign-key foreignTable="User" onDelete="CASCADE" onUpdate="CASCADE">
			<reference local="user_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="Role" onDelete="CASCADE" onUpdate="CASCADE">
			<reference local="role_id" foreign="id"/>
		</foreign-key>

		<index name="role_id">
			<index-column name="role_id"/>
		</index>

		<vendor type="mysql">
			<parameter name="Engine" value="InnoDB"/>
		</vendor>
	</table>

	<table name="Role" phpName="Role" idMethod="native">
		<column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
		<column name="name" phpName="Name" type="VARCHAR" size="50" required="true"/>

		<vendor type="mysql">
			<parameter name="Engine" value="InnoDB"/>
		</vendor>
	</table>

</database>
